---
layout: with-nonav
---

<div class="Book">
  <div
    class="Book__Title"
    style="font-size: 2rem; text-align: center; margin: 4rem 0"
  >
    ç¬¬{{page.chapter}}ç« ï¼š{{page.title}}
  </div>
  <div>
    <div
      class="Book__Meta"
      style="
        display: flex;
        gap: 1.5rem;
        justify-content: flex-start;
        margin-bottom: 2rem;
      "
    >
      <a href="javascript:void();" onclick="__goBackToIndex();">&larr;</a>

      {% if page.src %}
      <a href="{{page.src}}" target="_blank" rel="noopener noreferrer">ğŸ”—</a>
      {% endif %}

      <a
        title="X share"
        rel="noopener noreferrer"
        href="https://x.com/intent/tweet?url=https%3A//www.zhangxinghai.cn{{ page.url }}"
        target="_blank"
        >ğ•</a
      >

      {% if page.editing %}<span style="color: rgb(143, 95, 7)"
        >ç‹€æ…‹ï¼šç·¨è¼¯ä¸­</span
      >{% endif %}

      <span>å‘å¸ƒæ—¶é—´ï¼š{{page.date | date: "%Y-%m-%d"}}</span>

      {% assign words = page.content | number_of_words %}{% assign
      minutes_float = words | divided_by:200.0 %} {% assign minutes =
      minutes_float | ceil %}

      <span>é˜…è¯»æ—¶é—´ï¼š{{ minutes }} åˆ†é˜</span>
    </div>
  </div>
  <div class="Book__Content">{{content}}</div>
  <div
    class="Book__End"
    style="height: 1px; background: #ddd; width: 61.8%; margin: 3rem auto"
  ></div>
  <div
    class="Book__Page"
    style="display: flex; justify-content: space-between; margin-bottom: 3rem"
  >
    {% if page.previous %}
    <a href="{{page.previous.url}}">ä¸Šä¸€ç« ï¼š{{page.previous.title}}</a>
    {% else %}
    <a href="javascript:void(0);" style="color: #777; pointer-events: none"
      >å¼€å§‹</a
    >
    {% endif %} {% if page.next %}
    <a href="{{page.next.url}}">ä¸‹ä¸€ç« ï¼š{{page.next.title}}</a>
    {% else %}
    <a href="javascript:void(0);" style="color: #777; pointer-events: none"
      >ç»“æŸ</a
    >
    {% endif %}
  </div>
  <div class="Book__Side Book__Chapters">
    <h2>ç« èŠ‚åˆ—è¡¨</h2>
    <ul>
      {% assign pathSegments = page.url | split: '/'; %}
      {% assign zhulanName =
      pathSegments[1] == 'opengl' ? 'opengl' : 'patterns' %}
      {% for chapter in site[zhulanName] %}
      <li>
        <a href="{{chapter.url}}" class="{% if page.path == chapter.path %}disabled{% else %}normal{% endif %}">{{chapter.chapter}}ï¼š{{chapter.title}}</a>
      </li>
      {% endfor %}
    </ul>
  </div>
  <div class="Book__Side Book__Chapter_Menu">
    <script>
      {
        const bookContent = document.querySelector(".Book__Content")
        const h2h3 = bookContent.querySelectorAll("h2, h3")

        document.writeln("<h2>ç›®å½•</h2>")
        document.writeln("<ul>")
        h2h3.forEach((el) => {
          const text = el.textContent
          const id = el.id || text.replace(/\s+/g, "-").toLowerCase()
          document.writeln(
            `<li class="${el.tagName}"><a href="#${id}">${text}</a></li>`,
          )
        })
        document.writeln("</ul>")
      }
    </script>
  </div>
</div>
