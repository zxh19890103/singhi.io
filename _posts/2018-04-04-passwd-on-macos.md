---
layout: post
title: Linux中passwd文件数据结构说明
short: linux系统中，用户信息被存储于/etc/passwd文件中，每一行定义一个用户，这里解释一下其数据定义结构
tags:
  - Linux
category: tech
---

### 引言

通常在 Linux 系统中，用户的关键信息被存放在系统的 `/etc/passwd` 文件中，系统的每一个合法用户账号对应于该文件中的一行记录。这行记录定义了每个用户账号的属性。内容来自[百度百科](https://wapbaike.baidu.com/item/passwd)

### 结构说明

#### 示例

```sh
root:x:0:0:root:/root:/bin/bash
```

以英文冒号:分割，一共7个字段。

#### 结构

> 注册名：口令：用户标识号：组标识号：用户名：用户主目录：命令解释程序shell

#### 解释

**注册名(login_name)**：

用于区分不同的用户。在同一系统中注册名是唯一的。在很多系统上，该字段被限制在 `8` 个字符(字母或数字)的长度之内；并且要注意，通常在 Linux 系统中对字母大小写是敏感的。这与 MSDOS/Windows 是不一样的。

**口令(passwd)**：

系统用口令来验证用户的合法性。超级用户root或某些高级用户可以使用系统命令 `passwd` 来更改系统中所有用户的口令，普通用户也可以在登录系统后使用 `passwd` 命令来更改自己的口令。 现在的 Unix/Linux 系统中，口令不再直接保存在 `passwd` 文件中，通常将 `passwd` 文件中的口令字段使用一个“x”来代替，将 `/etc/shadow` 作为真正的口令文件，用于保存包括个人口令在内的数据。当然 `shadow` 文件是不能被普通用户读取的，只有超级用户才有权读取。 此外，需要注意的是，如果 `passwd` 字段中的第一个字符是“*”的话，那么，就表示该账号被查封了，系统不允许持有该账号的用户登录。

**用户标识号(UID)**：

UID 是一个数值，是 Linux 系统中唯一的用户标识，用于区别不同的用户。在系统内部管理进程和文件保护时使用 UID 字段。在 Linux 系统中，注册名和 UID 都可以用于标识用户，只不过对于系统来说 UID 更为重要；而对于用户来说注册名使用起来更方便。在某些特定目的下，系统中可以存在多个拥有不同注册名、但 UID 相同的用户，事实上，这些使用不同注册名的用户实际上是同一个用户。

**组标识号(GID)**：

这是当前用户的缺省工作组标识。具有相似属性的多个用户可以被分配到同一个组内，每个组都有自己的组名，且以自己的组标 识号相区分。像 UID 一样，用户的组标识号也存放在 `passwd` 文件中。在现代的 Unix/Linux 中，每个用户可以同时属于多个组。除了在 `passwd` 文件中指定其归属的基本组之外，还在 `/etc/group` 文件中指明一个组所包含用户。

**用户名(user_name)**：

包含有关用户的一些信息，如用户的真实姓名、办公室地址、联系电话等。在Linux系统中，mail 和 finger 等程序利用这些信息来标识系统的用户。

**用户主目录(home_directory)**：

该字段定义了个人用户的主目录，当用户登录后，他的Shell将把该目录作为用户的工作目录。在 Unix/Linux 系统中，超级用户 root 的工作目录为`/root`；而其它个人用户在/home目录下均有自己独立的工作环境，系统在该目录下为每个用户配置了自己的主目录。个人用户的文件都放置在各自的 主目录下。

**命令解释程序(Shell)**：

Shell 是当用户登录系统时运行的程序名称，通常是一个Shell程序的全路径名， 如 `/bin/bash`。为了阻止一个特定用户登录系统，可用 `/dev/null` 作为其shell，或例子中的`/sbin/nologin`。
